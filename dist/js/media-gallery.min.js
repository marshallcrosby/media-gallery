/*!
    * Media Gallery v1.0.0
    * Display media in a Swiper slider inside a Bootstrap modal.
    *
    * Copyright 2024 Blend Interactive
    * https://blendinteractive.com
*/
const swiperVersion="11.0.5",externalSrc={youtube:"https://www.youtube.com/iframe_api",vimeo:"https://player.vimeo.com/api/player.js",swiperScript:"https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.js",swiperCSS:"https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.css"},mediaGallery=()=>{const e=(e,t,o)=>{const r="script"===t?document.createElement("script"):document.createElement("link"),d="script"===t?"src":"href";"stylesheet"===t&&r.setAttribute("rel","stylesheet"),r.setAttribute(d,e),"script"===t?document.body.appendChild(r):"stylesheet"===t&&document.querySelector("head").appendChild(r),r.onload=o},t=document.querySelectorAll(".media-gallery__item"),o=window.getComputedStyle(document.documentElement).getPropertyValue("--swiper-theme-color");t&&(o||e(externalSrc.swiperCSS,"stylesheet"),"undefined"==typeof Swiper&&e(externalSrc.swiperScript,"script"));const r=document.querySelector(".media-viewer__swiper"),d=r.querySelector(".media-viewer__wrapper"),i=e=>{let t={vendor:null,id:null};if(e.includes("vimeo.com")){const o=/\/(?:playback\/)?(\d+)/,r=e.match(o);if(r&&r[1])return t={vendor:"vimeo",id:r[1]}}const o=e.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);return o&&o[1]?t={vendor:"youtube",id:o[1]}:t},a=document.querySelectorAll("[data-video-src]");let l=null,n=null;for(const e of a){let t=i(e.getAttribute("data-video-src"));"youtube"===t.vendor&&(l=!0),"vimeo"===t.vendor&&(n=!0)}if(l){document.querySelectorAll('script[src="https://www.youtube.com/iframe_api"]').length||e(externalSrc.youtube,"script"),onYouTubeIframeAPIReady=(()=>{s++,console.log("Youtube API Ready")})}if(n){document.querySelectorAll('script[src="https://player.vimeo.com/api/player.js"]').length||e(externalSrc.vimeo,"script")}let s=0,c=0;l&&(c=1);const u=(e,t)=>{const o="vimeoPlayer"+Math.floor(1e9*Math.random());e.setAttribute("id",o),e.classList.add("vimeo-player");const d=new Vimeo.Player(o,{id:t});d.on("loaded",()=>{r.swiper.on("slideChange",()=>{d.pause()}),window.addEventListener("mediaModalClosedEvent",()=>{d.pause()})})},m=(e,t)=>{const o="ytPlayer"+Math.floor(1e9*Math.random());let d;e.setAttribute("id",o),e.classList.add("yt-player"),d=new YT.Player(o,{videoId:t,height:"20000",width:"20000",playerVars:{autoplay:0,controls:1,showinfo:0,rel:0},events:{onReady:function(){r.swiper.on("slideChange",()=>{d.pauseVideo()}),window.addEventListener("mediaModalClosedEvent",()=>{d.pauseVideo()})}}})},p=(e,t,o)=>{const d="html5VideoPlayer"+Math.floor(1e9*Math.random());e.classList.add("html5-video-player"),e.setAttribute("id",d),e.setAttribute("controls",""),e.setAttribute("playsinline",""),e.setAttribute("poster",o),e.innerHTML=`\n            <source src="${t}" type="video/mp4">\n            Your browser does not support the video tag.\n        `,e.addEventListener("loadstart",()=>{r.swiper.on("slideChange",()=>{e.pause()}),window.addEventListener("mediaModalClosedEvent",()=>{e.pause()})})};let y,v;document.querySelectorAll(".media-gallery").forEach(e=>{e.setAttribute("data-group-id","mediaGallery-"+Math.floor(1e9*Math.random()));const t=e.querySelectorAll(".media-gallery__item"),o=document.createElement("div");o.classList.add("media-viewer__slide"),o.classList.add("swiper-slide"),t.forEach((a,l)=>{a.setAttribute("role","button"),a.setAttribute("tabindex","0"),a.setAttribute("aria-label","View media"),a.addEventListener("click",n=>{if(v!==e.getAttribute("data-group-id")){d.children.length>0&&(e=>{e&&(e.swiper.destroy(!0,!0),e.querySelectorAll(".media-viewer__slide").forEach(e=>e.remove()))})(r);for(const e of t){const t=o.cloneNode(!0),r=e.getAttribute("data-video-src"),a=e.querySelector(".media-gallery__media"),l=a?a.cloneNode(!0):null;if(l&&t.appendChild(l),d.appendChild(t),r){const e=i(r),o=null!==e.vendor?document.createElement("div"):document.createElement("video");t.appendChild(o),"youtube"===e.vendor&&m(o,e.id),"vimeo"===e.vendor&&u(o,e.id),null===e.vendor&&p(o,r,l.src),l&&l.remove()}}(e=>{const t=new Swiper(".media-viewer__swiper",{autoHeight:!0,speed:400,spaceBetween:4,navigation:{prevEl:".media-viewer__button-prev",nextEl:".media-viewer__button-next"},pagination:{el:".media-viewer__slide-status",type:"fraction"},keyboard:{enabled:!0}});e&&t.slideTo(e,0,!1)})(l)}else r.swiper.slideTo(l,0,!1);y=a,v=e.getAttribute("data-group-id")}),a.addEventListener("keydown",e=>{"Enter"!==e.code&&"Space"!==e.code||(e.preventDefault(),e.stopPropagation(),e.target.click())})})});const w=document.querySelector(".modal--media .bar-loader"),h=document.getElementById("mediaModal");document.body.appendChild(h),h.addEventListener("shown.bs.modal",()=>{setTimeout(()=>{w.classList.add("bar-loader--hidden")},1e3)});let b=new Event("mediaModalClosedEvent");h.addEventListener("hidden.bs.modal",()=>{window.dispatchEvent(b),setTimeout(()=>{w.classList.remove("bar-loader--hidden"),y.focus()},5)}),function e(){s!==c?setTimeout(e,300):document.documentElement.classList.add("js-media-gallery--ready")}()};
//# sourceMappingURL=media-gallery.min.js.map